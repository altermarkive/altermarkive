<html>
<head>
<style type="text/css">
html,body {
  background-color: black;
  color: white;
  font-family: sans-serif;
  height: 100%;
  margin: 0px;
  padding: 0px;
}
#panel {
  background: black;
  height: 100%;
}
</style>
</head>
<body>
<script>
function extract(gpx) {
  const paths = [];
  const rtes = gpx.getElementsByTagName("rte");
  for (var i = 0; i < rtes.length; i++) {
    const rtepts = rtes[i].getElementsByTagName("rtept");
    const path = [];
    paths.append(path);
    for (var j = 0; j < rtepts.length; j++) {
      path.append([rtepts[j].getAttribute["lon"], rtepts[j].getAttribute["lat"]]);
    }
  }
  const trksegs = gpx.getElementsByTagName("trkseg");
  for (var i = 0; i < trksegs.length; i++) {
    const trkpts = trksegs[i].getElementsByTagName("trkpt");
    const path = [];
    paths.append(path);
    for (var j = 0; j < trkpts.length; j++) {
      path.append([trkpts[j].getAttribute["lon"], trkpts[j].getAttribute["lat"]]);
    }
  }
  alert(paths[0]);
}

function parse(content) {
  const parser = new DOMParser();
  const gpx = parser.parseFromString(content, "application/xml");
  const error = gpx.querySelector("parsererror");
  if (error) {
    alert(error);
  } else {
    extract(gpx);
  }
}

function extract(file) {
  if (file) {
    const reader = new FileReader();
    reader.readAsText(file, "UTF-8");
    reader.onload = function (event) {
      parse(event.target.result);
    }
    reader.onerror = function (event) {
      alert(event);
    }
  }
}

function trigger() {
  document.getElementById("gpx").click();
}
</script>
<input type="file" id="gpx" style="display: none;" onchange="extract(this.files[0]);"></input>
<div id="panel" onclick="trigger();"></div>
</body>
</html>
